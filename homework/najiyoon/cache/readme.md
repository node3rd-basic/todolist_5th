## 인덱스 설명

Index 새로운책에 인덱스 추가 : 새로운 책 /다른 기준으로 생김 ; 컬럼 추가시 생긴다고 생각
; hi가 들어간 이메일 검색 하려면

```
select email
from users
where email like '%hi%'
```

\*aa - aa로 끝나는 것

_aa_ - aa가 중간에 있는 것

aa* - aa로 시작하는 것
; 프리즈마는 * 대신 %로

연락처로 인덱스를 만들었다면 ? 02로 시작되는 번호 031로 시작되는 번호… => 인덱스 있으니 찾기 쉬움 but 중간 글자는 인덱스로 찾기 힘듦.
Where like 할 때 %찾을번호 만 인덱스 사용 가능 나머지는 인덱스 사용하지 않음

`쿼리실행계획`
내가 어떤 쿼리 날릴때 어떤 인덱스 쓰는지 알 수있는 것
Explain select \* from users where name = “Hillaryadfs@example.org”
내가 날릴 쿼리의 계획을 볼 수 있다 => 별도로 따로 공부하기

인덱스 못쓰는 경우 : like 검색시 느려질 수 있음
검색시 전방일치 방법? 많이 씀

인덱스 걸 쿼리와 / 어디서 하면 좋을 지
=> 조회 하고 Explain 시 되야함
Alter => 수정

SELECT name FROM limit 500, 500;
이 쿼리는 테이블에서 501번째 행부터 500개의 행을 선택하여 name 컬럼을 반환

SELECT COUNT(\*) FROM users;
users 테이블의 총 행 수를 반환

SHOW PROCESSLIST;
현재 실행 중인 모든 MySQL 프로세스(쿼리)의 목록

ALTER TABLE users ADD INDEX idx_users_name(name);
users 테이블의 name 컬럼에 'idx_users_name'이라는 이름의 인덱스를 추가

ALTER TABLE users DROP INDEX idx_users_name;
users 테이블에서 'idx_users_name' 인덱스를 제거

SHOW CREATE TABLE users;
users 테이블의 생성 구문

SELECT \* FROM users WHERE email LIKE "%hi%";
users 테이블에서 email 컬럼에 'hi'가 포함된 모든 행을 선택

SELECT \* FROM users;
users 테이블의 모든 행과 열을 선택

SELECT \* FROM users WHERE email = "naji30@naver.com";
users 테이블에서 email이 정확히 "naji30@naver.com" 있는 행 선택

`투두아이템`
에서 index 나누려면..

Index 가 2개 밖에 없는 done at 은 의미가 없음

데이터가 많아질 수록 created_at 이 나음

`ERD 피드백`
팀을 만든 사람? 팀장을 넣고 싶다 할 때에는 팀즈에 유저 아이디 넣기 (유저와 팀은 n:m)
서비스 라면 ? 사용자마다 권한 , 팀장을 매번 변경시 멤버스 아래에 롤 추가/(어드민?은 어드민인지 아닌지만 확인… 롤이 조금 더 낫다) ; 롤 레벨 등 권한 다양

## 캐시

캐시
: 웹에서 이용하는 cache
cache란? 임시 정보
갑자기 트래픽이 몰릴 경우, 특정영역에서 몰려서 속도가 느릴 때는 ?
옵션 1. 캐쉬
브라우저 캐쉬는 : 응답하고 요청(일부분). 브라우저는 내부적으로 캐쉬 만듬 => 똑같은 요청하면 똑같은 응답 받으려 함

벡앤드에서 캐시는 : 요청의 파라미터값 같다면 : 응답값은 보통 다르다  
단, 아주 짧은 시간에 많은 요청이 온다면 응답값이 같을 확률이 높다.

요청에 해당하는 응답값을 내보내기

요청값과 응답값 저장함.
; 컨트롤러에서 res 응답값 나가기 전에 캐쉬에 저장함: 데이터 유효기간Time to live => til 을 지정할 수 있음 (1분, 5분등)

유효기간 지나기 전에 데이터 요청하면 빠르게 캐쉬에서 정보가져올 수 있음; 함수단위로도. 디비단위로도 … => 요청이 온다 -> cache 존재 여부 확인 후
존재 : 바로 응답
비존재 : 데이터 수집 (서비스 -레파지토리 등등 거치기) -> 캐시저장 -> 응답

: 그래서 캐쉬가 빠르다고 하는구낭…

캐시는 어디에 저장하는게 좋은지? 레디스

보통 외부에 캐시 저장하는 디비는 ; 레디스 (Redis)
왜 레디스를 사용하는지 ; 빠른 응답
레디스는 왜 빠른가 ?

1. 레디스는 메모리를 사용하므로(hdd하드디스크, ssd… 중 메모리가 가장 빠름) : 빠른 것을 알아보는 방법? 가격 보기 ㅋㅋㅋㅋ 메모리 32gb 가격= ssd 1tb 가격 / (실행중인 것은 메모리에서 .. 빠르게 처리됨)
2. 데이터를 넣을 때 sql, nodal 등 저장 방식 ; 각자 찾아가는 알고리즘 방식 이때 레디스가 선택한 검색 알고리즘 으로 해쉬hash 알고리즘 사용 ; 해쉬알고리즘 이란 패스워드 만들 때 사용되는 것인데 … 원본문자열과 바뀐 해쉬된 문자열은 1:1 맵핑 / 해시알고리즘은 이 키에 이 벨류로 저장되서 키 하나 넣으면 한 번에 찾을 수 있음 => 비호계산법? ; => 결론 내가 원하는 데이터 찾을 때 해쉬로 키와 벨류로 찾는다.
3. 즉 모든 데이터를 캐시에 넣으면 비용이 많이 듬 ; 캐시 적중율
   요청양과 히트율으로 계산한 것이 적중률 => 높을 수록 적중률이 높은 것

- 적재적소에 캐쉬 사용해보기
- 페이직 네이션 사용 하려면 전체화면 나누기 … 해야함 => 캐시 많이 사용
